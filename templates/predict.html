<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Risk Assessment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header">
        <div class="back-btn" onclick="location.href='/';">
            <span>‚Üê</span> Back
        </div>
        <h2>HEART RISK ASSESSMENT</h2>
        <div></div>
    </div>

    <div class="form-container">
        <div class="form-intro">
            <h3>Enter Your Health Information</h3>
            <p>Fill in the following information to assess your heart disease risk. All fields are required for accurate prediction.</p>
        </div>

        <form action="/predict" method="post" id="prediction-form">
            <div class="form-tabs">
                <div class="tab-btn active" data-tab="basic">Basic Info</div>
                <div class="tab-btn" data-tab="cardiac">Cardiac Metrics</div>
                <div class="tab-btn" data-tab="lifestyle">Lifestyle</div>
                <div class="tab-btn" data-tab="medical">Medical History</div>
            </div>

            <div class="tab-content active" id="basic">
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="number" name="age" id="age" min="18" max="100" required>
                </div>
                
                <div class="form-group">
                    <label for="systolic_bp">Systolic Blood Pressure (mmHg)</label>
                    <input type="number" name="systolic_bp" id="systolic_bp" min="80" max="220" required>
                </div>
                
                <div class="form-group">
                    <label for="diastolic_bp">Diastolic Blood Pressure (mmHg)</label>
                    <input type="number" name="diastolic_bp" id="diastolic_bp" min="50" max="130" required>
                </div>
                
                <div class="form-group">
                    <label for="obesity_bmi">BMI</label>
                    <input type="number" name="obesity_bmi" id="obesity_bmi" min="15" max="45" step="0.1" required>
                </div>
                
                <div class="form-group">
                    <label for="resting_heart_rate">Resting Heart Rate (BPM)</label>
                    <input type="number" name="resting_heart_rate" id="resting_heart_rate" min="40" max="120" required>
                </div>
            </div>

            <div class="tab-content" id="cardiac">
                <div class="form-group">
                    <label for="cholesterol">Total Cholesterol (mg/dl)</label>
                    <input type="number" name="cholesterol" id="cholesterol" min="100" max="400" required>
                </div>
                
                <div class="form-group">
                    <label for="triglycerides">Triglycerides (mg/dl)</label>
                    <input type="number" name="triglycerides" id="triglycerides" min="50" max="500" required>
                </div>
                
                <div class="form-group">
                    <label for="ldl">LDL Cholesterol (mg/dl)</label>
                    <input type="number" name="ldl" id="ldl" min="50" max="300" required>
                </div>
                
                <div class="form-group">
                    <label for="hdl">HDL Cholesterol (mg/dl)</label>
                    <input type="number" name="hdl" id="hdl" min="20" max="100" required>
                </div>
                
                <div class="form-group">
                    <label for="cholesterol_hdl_ratio">Cholesterol/HDL Ratio</label>
                    <input type="number" name="cholesterol_hdl_ratio" id="cholesterol_hdl_ratio" min="1" max="15" step="0.1" required>
                </div>
            </div>

            <div class="tab-content" id="lifestyle">
                <div class="form-group radio-group">
                    <label>Smoking</label>
                    <div class="radio-options">
                        <label><input type="radio" name="smoking" value="0" checked> No</label>
                        <label><input type="radio" name="smoking" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Alcohol Consumption</label>
                    <div class="radio-options">
                        <label><input type="radio" name="alcohol_consumption" value="0" checked> No</label>
                        <label><input type="radio" name="alcohol_consumption" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Physical Activity</label>
                    <div class="radio-options">
                        <label><input type="radio" name="physical_activity" value="0"> Inactive</label>
                        <label><input type="radio" name="physical_activity" value="1" checked> Active</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="diet_quality">Diet Quality</label>
                    <select name="diet_quality" id="diet_quality" required>
                        <option value="Poor">Poor</option>
                        <option value="Average" selected>Average</option>
                        <option value="Good">Good</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="stress_level">Stress Level</label>
                    <select name="stress_level" id="stress_level" required>
                        <option value="Low">Low</option>
                        <option value="Medium" selected>Medium</option>
                        <option value="High">High</option>
                    </select>
                </div>
            </div>

            <div class="tab-content" id="medical">
                <div class="form-group radio-group">
                    <label>Diabetes</label>
                    <div class="radio-options">
                        <label><input type="radio" name="diabetes" value="0" checked> No</label>
                        <label><input type="radio" name="diabetes" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Hypertension</label>
                    <div class="radio-options">
                        <label><input type="radio" name="hypertension" value="0" checked> No</label>
                        <label><input type="radio" name="hypertension" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>ECG Abnormality</label>
                    <div class="radio-options">
                        <label><input type="radio" name="ecg_abnormality" value="0" checked> No</label>
                        <label><input type="radio" name="ecg_abnormality" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Family History of Heart Disease</label>
                    <div class="radio-options">
                        <label><input type="radio" name="family_history" value="0" checked> No</label>
                        <label><input type="radio" name="family_history" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Previous Stroke</label>
                    <div class="radio-options">
                        <label><input type="radio" name="stroke_history" value="0" checked> No</label>
                        <label><input type="radio" name="stroke_history" value="1"> Yes</label>
                    </div>
                </div>
                
                <div class="form-group radio-group">
                    <label>Kidney Disease</label>
                    <div class="radio-options">
                        <label><input type="radio" name="kidney_disease" value="0" checked> No</label>
                        <label><input type="radio" name="kidney_disease" value="1"> Yes</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="cardiovascular_risk_score">Cardiovascular Risk Score (if known)</label>
                    <input type="number" name="cardiovascular_risk_score" id="cardiovascular_risk_score" min="60" max="150" step="0.1">
                    <small>Leave blank if unknown. This will be calculated.</small>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" id="prev-btn" disabled>Previous</button>
                <button type="button" id="next-btn">Next</button>
                <button type="submit" id="submit-btn" style="display: none;">Calculate Risk</button>
            </div>
        </form>
    </div>

    <script>
        // Form navigation
        const tabs = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        let currentTab = 0;

        // Initialize
        showTab(currentTab);

        // Tab buttons
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === tabName) {
                        content.classList.add('active');
                        
                        // Update current tab index
                        currentTab = Array.from(tabs).indexOf(tab);
                        
                        // Update navigation buttons
                        updateButtons();
                    }
                });
            });
        });

        // Previous button
        prevBtn.addEventListener('click', () => {
            if (currentTab > 0) {
                currentTab--;
                showTab(currentTab);
            }
        });

        // Next button
        nextBtn.addEventListener('click', () => {
            if (validateCurrentTab() && currentTab < tabs.length - 1) {
                currentTab++;
                showTab(currentTab);
            }
        });

        // Show specified tab
        function showTab(index) {
            // Hide all tab contents
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Show current tab content
            tabContents[index].classList.add('active');
            
            // Update active tab indicator
            tabs.forEach(tab => tab.classList.remove('active'));
            tabs[index].classList.add('active');
            
            // Update buttons
            updateButtons();
        }

        // Update navigation buttons
        function updateButtons() {
            prevBtn.disabled = currentTab === 0;
            
            if (currentTab === tabs.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline';
            } else {
                nextBtn.style.display = 'inline';
                submitBtn.style.display = 'none';
            }
        }

        // Validate current tab
        function validateCurrentTab() {
            const currentFields = tabContents[currentTab].querySelectorAll('input[required], select[required]');
            let valid = true;
            
            currentFields.forEach(field => {
                if (!field.value) {
                    field.classList.add('invalid');
                    valid = false;
                } else {
                    field.classList.remove('invalid');
                }
            });
            
            return valid;
        }
    </script>
</body>
</html>
